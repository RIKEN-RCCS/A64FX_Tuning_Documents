Search.setIndex({"docnames": ["cachewait", "cachewait-contiguous", "cachewait-soa", "cachewait-unroll", "calcwait", "calcwait-fission", "calcwait-striping", "index", "introduction", "simd", "simd-fission", "simd-interchange1", "simd-interchange2", "summary"], "filenames": ["cachewait.rst", "cachewait-contiguous.rst", "cachewait-soa.rst", "cachewait-unroll.rst", "calcwait.rst", "calcwait-fission.rst", "calcwait-striping.rst", "index.rst", "introduction.rst", "simd.rst", "simd-fission.rst", "simd-interchange1.rst", "simd-interchange2.rst", "summary.rst"], "titles": ["<span class=\"section-number\">4. </span>Reduction of Waiting Time for Cache Access", "<span class=\"section-number\">4.3. </span>Specifying CONTIGUOUS Attribute to Array Pointer", "<span class=\"section-number\">4.2. </span>Interchange of Array Dimension for AoS Layout", "<span class=\"section-number\">4.1. </span>Full-Unrolling of Innermost Loop with Non-Contiguous Data Access", "<span class=\"section-number\">3. </span>Reduction of Waiting Time for Calculation", "<span class=\"section-number\">3.1. </span>Fission of Loop with Large Loop Body", "<span class=\"section-number\">3.2. </span>Striping of Innermost Loop with Small Iteration Count", "Tuning Tips for A64FX Processors", "<span class=\"section-number\">1. </span>Introduction", "<span class=\"section-number\">2. </span>Promoting Vectorization", "<span class=\"section-number\">2.3. </span>Fission of Imperfectly Nested Loops", "<span class=\"section-number\">2.1. </span>Interchange of Innermost Loop with Data Dependency", "<span class=\"section-number\">2.2. </span>Interchange of Innermost Loop with Small Iteration Count", "<span class=\"section-number\">5. </span>Summary"], "terms": {"when": [0, 1, 2, 3, 4, 5, 6, 10, 11, 12], "cpu": [0, 1, 4, 5, 8, 13], "perform": [0, 1, 2, 3, 4, 5, 6, 7, 9, 10, 11, 12, 13], "analysi": [0, 3, 4, 8, 10], "report": [0, 4, 8, 13], "show": [0, 2, 4, 8, 13], "higher": [0, 4], "ratio": [0, 4, 10, 11, 12], "l1d": [0, 1, 2, 3, 5, 6], "cycl": [0, 1, 2, 3, 4, 5, 6, 10, 11, 12], "account": [0, 1, 2, 3, 4, 5, 6, 10, 11, 12], "might": [0, 1, 2, 3, 4, 5, 6, 10, 11, 12], "room": [0, 4], "reconsid": 0, "data": [0, 1, 2, 7, 8, 9, 13], "pattern": 0, "sourc": [0, 5, 6, 11], "program": [0, 1, 2, 3, 4, 5, 6, 8, 11, 13], "effect": [0, 4, 6, 8, 9], "techniqu": [0, 1, 2, 3, 4, 5, 6, 8, 9, 10, 11, 12, 13], "case": [0, 4, 8, 13], "ar": [0, 1, 2, 3, 4, 5, 6, 8, 9, 10, 11, 12, 13], "explain": [0, 2, 4, 8, 9, 13], "thi": [0, 1, 2, 3, 4, 5, 6, 7, 9, 10, 11, 12, 13], "section": [0, 4, 9], "full": [0, 5, 7, 13], "unrol": [0, 5, 7, 13], "innermost": [0, 4, 7, 9, 10, 13], "loop": [0, 1, 2, 4, 7, 9, 13], "non": [0, 2, 6, 7, 13], "contigu": [0, 2, 6, 7, 13], "interchang": [0, 7, 9, 13], "arrai": [0, 3, 4, 6, 7, 11, 13], "dimens": [0, 1, 3, 7, 13], "ao": [0, 7, 13], "layout": [0, 7, 13], "specifi": [0, 6, 7, 13], "attribut": [0, 7, 13], "pointer": [0, 7, 13], "On": [0, 4], "calcul": [0, 2, 5, 6, 7, 8, 10, 11, 12, 13], "i": [0, 1, 2, 3, 4, 5, 6, 7, 10, 11, 12], "distinguish": [0, 4], "each": [0, 4, 8], "execut": [0, 1, 2, 3, 4, 5, 6, 10, 11, 12], "statu": [0, 4], "oldest": [0, 4], "flight": [0, 4], "instruct": [0, 1, 2, 4, 5, 6, 10, 11, 12], "order": [0, 2, 4], "therefor": [0, 1, 3, 4, 10, 11], "reduc": [0, 1, 2, 3, 5, 6, 10, 11, 12], "togeth": 0, "result": [0, 1, 2, 3, 4, 5, 6, 8, 10, 11, 12], "exampl": [0, 4, 8, 13], "where": [0, 2, 4, 5, 6], "mani": [0, 2, 4, 6], "refer": [0, 4, 8, 11, 12, 13], "within": [0, 2, 3, 4], "In": [1, 2, 3, 5, 6, 10, 11, 12], "fortran": [1, 2, 3, 5, 6, 8, 10, 12], "can": [1, 2, 5, 6, 8, 11, 12], "associ": 1, "onli": 1, "target": [1, 5, 6], "an": [1, 2, 3, 4, 5, 6, 10, 11, 12], "fujitsu": [1, 3, 5, 6, 8, 10, 12], "compil": [1, 2, 3, 4, 5, 6, 8, 9, 10, 11, 12], "optim": [1, 2, 3, 4, 5, 6, 8], "object": [1, 8, 9, 13], "code": [1, 2, 3, 5, 6, 8, 9, 10, 11, 12, 13], "access": [1, 2, 4, 5, 6, 7, 8, 13], "under": [1, 8], "assumpt": 1, "point": [1, 2, 4, 5, 6, 12], "locat": 1, "memori": [1, 2], "It": 1, "mean": 1, "user": [1, 2, 3, 5, 6, 8], "done": 1, "load": 1, "store": 1, "busi": [1, 2, 3, 5], "time": [1, 2, 3, 5, 6, 7, 8, 10, 11, 12, 13], "cach": [1, 2, 3, 4, 5, 6, 7, 8, 13], "lead": [1, 2, 3, 4, 5, 6, 10], "reduct": [1, 2, 3, 5, 6, 7, 8, 10, 12, 13], "us": [1, 8, 12], "base": [1, 5, 8, 13], "stream": 1, "benchmark": 1, "improv": [1, 2, 3, 5, 6, 8, 10, 11, 12], "shown": [1, 2, 3, 5, 6, 8, 10, 11, 12], "below": [1, 2, 3, 5, 6, 8, 10, 11, 12], "pa": 1, "pb": 1, "pc": 1, "which": [1, 3, 5, 6, 8, 10, 11, 12, 13], "allocat": 1, "origin": [1, 2, 3, 5, 6, 10, 11, 12], "type": [1, 2, 5, 8], "dtype": 1, "kind": 1, "8": [1, 10], "b": [1, 6], "c": [1, 2, 3, 5, 6, 8, 10, 12], "end": [1, 3, 6, 10, 11], "dtarg": 1, "omp": [1, 3], "parallel": [1, 3, 5, 6], "do": [1, 2, 3, 5, 6, 10, 11, 12], "ocl": [1, 3, 5, 6, 8], "norecurr": [1, 2, 6, 10], "1": [1, 2, 3, 5, 6, 8, 10, 11, 12, 13], "n": [1, 2, 6, 10, 11], "scalar": 1, "befor": [1, 2, 3, 5, 6, 10, 11, 12], "after": [1, 2, 3, 4, 5, 6, 10, 11, 12], "graph": [1, 2, 3, 5, 6, 10, 11, 12], "assum": 1, "block": 1, "l2": 1, "paramet": [1, 2, 3, 5, 6, 10, 11, 12], "wa": [1, 2, 3, 5, 6, 8, 10, 11, 12], "chosen": 1, "follow": [1, 2, 3, 5, 6, 8, 10, 11, 12, 13], "196608": 1, "compar": [1, 2, 3, 5, 6, 10, 11, 12], "right": [1, 2, 3, 5, 6, 8], "left": [1, 2, 3, 5, 6], "half": [1, 3], "wait": [1, 2, 3, 5, 6, 7, 8, 13], "becam": 1, "domin": 1, "44": [1, 5], "A": [1, 2, 3, 5, 10, 11, 12], "relat": [1, 2, 3, 5, 6, 8, 10, 11, 12], "present": [1, 2, 3, 5, 6, 8, 10, 11, 12, 13], "meet": [1, 2, 3, 5, 6, 8, 10, 11, 12, 13], "applic": [1, 2, 3, 5, 6, 8, 10, 11, 12, 13], "tune": [1, 2, 3, 5, 6, 8, 10, 11, 12, 13], "a64fx": [1, 2, 3, 5, 6, 8, 9, 10, 11, 12, 13], "comput": [1, 2, 3, 5, 6, 8, 9, 10, 11, 12, 13], "system": [1, 2, 3, 5, 6, 8, 10, 11, 12, 13], "genesi": [1, 2, 8], "fugaku": [1, 2, 3, 5, 6, 8, 11, 12], "languag": [1, 2, 8], "2": [1, 3, 5, 6, 8, 11, 12, 13], "88": 1, "statement": [1, 10], "guid": [1, 2, 3, 5, 6, 8], "contain": [1, 10], "variabl": [1, 2, 3, 5, 6, 10, 11, 12], "5": [1, 5, 6, 8, 11, 12], "4": [1, 3, 6, 8], "7": 1, "supplement": 1, "ad": [1, 3, 5, 6], "notic": [1, 2, 3, 5, 6, 8], "portal": [1, 2, 3, 5, 6, 8], "requir": [1, 2, 3, 5, 6, 8, 9], "read": [1, 2, 3, 5, 6, 8], "abov": [1, 2, 3, 5, 6, 8], "document": [1, 2, 3, 5, 6, 7, 10, 13], "structur": [2, 7], "alloc": [2, 5], "declar": 2, "struct": 2, "particl": 2, "doubl": [2, 10], "x": [2, 6, 8, 10, 11, 13], "y": [2, 6, 10], "z": [2, 6], "similar": 2, "multi": 2, "2d": 2, "3": [2, 3, 5, 6, 12, 13], "particles_ao": 2, "For": 2, "much": 2, "larger": 2, "than": [2, 5], "vector": [2, 3, 7, 8, 10, 11, 12, 13], "whose": 2, "correspond": 2, "size": 2, "expect": 2, "promot": [2, 4, 5, 7, 8, 13], "better": 2, "howev": [2, 3, 5, 6, 12], "sinc": [2, 5, 6], "first": [2, 3], "previou": 2, "becom": [2, 3, 12], "more": [2, 3, 5, 8, 10], "second": 2, "realiz": 2, "soa": 2, "particles_soa": 2, "As": [2, 3, 5, 6, 10, 11, 12], "while": 2, "also": [2, 8], "temporari": 2, "m": [2, 10], "were": [2, 8], "introduc": 2, "replac": 2, "bodi": [2, 4, 7, 13], "j": [2, 5, 6, 10, 12], "int": [2, 5, 6, 10], "0": [2, 3, 5, 6, 8, 10, 11], "const": [2, 6, 10], "float": [2, 4, 5, 6, 12], "xi": 2, "yi": 2, "zi": 2, "ax": 2, "ai": 2, "az": 2, "dx": 2, "dy": 2, "dz": 2, "r2": 2, "eps2": 2, "ri": 2, "f": [2, 3, 6, 10], "sqrtf": 2, "mri": 2, "ri2": 2, "mri3": 2, "acc": 2, "pragma": [2, 6, 10], "2048": 2, "dramat": [2, 3, 5], "34": 2, "appear": 2, "consid": [2, 5, 6, 13], "due": [2, 5, 6], "chain": [2, 4], "kernel": [2, 3, 10], "processor": [2, 3, 5, 6, 8, 9, 12], "condit": [2, 8], "multipl": [2, 10, 12], "index": 3, "iter": [3, 4, 7, 9, 11, 13], "count": [3, 4, 7, 9, 13], "constant": 3, "small": [3, 4, 5, 7, 9, 13], "make": [3, 10, 11], "decreas": [3, 5, 6], "fullunroll_pre_simd": 3, "ip": [3, 5, 12], "ha": [3, 5, 6, 11, 12], "privat": 3, "fbuf": 3, "ig": 3, "ng3": 3, "v1": 3, "d0": [3, 5], "v2": 3, "v3": 3, "v4": 3, "15": 3, "cvel": 3, "131": 3, "drop": 3, "70": 3, "axhelm": [3, 10], "nek5000": [3, 8, 10], "r": [3, 8, 10, 11], "cfd": [3, 10], "serial": [3, 5], "core": [3, 5], "": [3, 5, 6, 8, 13], "9": [3, 5, 6, 8], "integ": [4, 5], "check": 4, "fission": [4, 7, 9, 13], "larg": [4, 7, 12, 13], "stripe": [4, 7, 13], "try": [5, 6], "softwar": [5, 6], "pipelin": [5, 6, 12], "exploit": [5, 6, 9], "consum": 5, "predic": [5, 12], "regist": [5, 12], "usual": 5, "shortag": 5, "advis": [5, 6], "distribut": [5, 10], "automat": 5, "insert": [5, 6], "control": [5, 6], "line": [5, 6], "loop_fission_target": 5, "treat": 5, "sever": [5, 6], "so": [5, 8], "ii": 5, "cumcnt": 5, "k": [5, 10, 11, 12], "isp": 5, "dh": 5, "up": 5, "idelx": 5, "s0x": 5, "75": 5, "s0y": 5, "s0z": 5, "i2": 5, "gp": 5, "inc": 5, "s1_1": 5, "s1_2": 5, "s1_3": 5, "smo_1": 5, "ab": 5, "smo_2": 5, "smo_3": 5, "dsx": 5, "dsy": 5, "dsz": 5, "kp": 5, "jp": 5, "pjtmpx": 5, "pjtmpy": 5, "pjtmpz": 5, "dstmpx": 5, "fac": 5, "dstmpy": 5, "dstmpz": 5, "q": [5, 10], "delx": [5, 6], "idelt": 5, "pjx": 5, "pjy": 5, "pjz": 5, "enddo": [5, 12], "l": 5, "20": 5, "At": [5, 12], "suppress": [5, 6], "spill": 5, "fill": 5, "behavior": 5, "lqcd": [5, 8], "lammp": [5, 6, 8], "thread": [5, 8], "ffvhc": [5, 8], "ac": [5, 8], "11": 5, "10": [5, 12], "loop_fiss": 5, "schedul": [5, 6], "differ": [6, 11], "obtain": [6, 11], "pseudo": 6, "tmp_b1": 6, "tmp_b2": 6, "tmp_c1": 6, "tmp_c2": 6, "tmp_a1": 6, "bmp_c1": 6, "tmp_a2": 6, "even": [6, 11], "rel": [6, 12], "jj": 6, "jnum": 6, "flt_t": 6, "forcelj": 6, "evdwl": 6, "jtype": 6, "sbindex": 6, "onetyp": 6, "jlist": 6, "sbbit": 6, "neighmask": 6, "els": 6, "xtmp": 6, "deli": 6, "ytmp": 6, "delz": 6, "ztmp": 6, "w": 6, "cutsq": 6, "ljc12oi": 6, "rsq": 6, "factor_lj": 6, "special_lj": 6, "r2inv": 6, "r6inv": 6, "lj1": 6, "lj2": 6, "fpair": 6, "fpx": 6, "fxtmp": 6, "newton_pair": 6, "fpy": 6, "fytmp": 6, "fpz": 6, "fztmp": 6, "eflag": 6, "lj3": 6, "lj34i": 6, "lj4": 6, "offset": 6, "sevdwl": 6, "eatom": 6, "fwtmp": 6, "ip_pre_ev_tally_nborv": 6, "vflag": 6, "26": 6, "49": 6, "37": [6, 8, 13], "averag": 6, "27": 6, "port": 6, "gromac": [6, 8], "common": [6, 8, 13], "part": [6, 10], "expans": 6, "number": [6, 8, 12], "interleav": 6, "introduct": 7, "what": 7, "environ": 7, "measur": 7, "depend": [7, 9, 13], "imperfectli": [7, 9, 13], "nest": [7, 9, 13], "summari": 7, "other": [8, 13], "real": [8, 13], "These": [8, 13], "practic": 8, "ones": [8, 13], "experienc": 8, "area": 8, "name": 8, "electromagnet": 8, "wumingpic2d": 8, "fluid": 8, "dynam": 8, "frontflow": 8, "molecular": 8, "quantum": 8, "chromodynam": 8, "weather": 8, "climat": 8, "scale": [8, 11, 12], "The": 8, "group": 8, "e": [8, 10], "reader": [8, 13], "find": 8, "out": 8, "candid": 8, "from": [8, 10, 11, 12, 13], "profil": [8, 13], "eight": 8, "three": 8, "should": 8, "focus": 8, "explan": 8, "consist": 8, "piec": 8, "motiv": 8, "appli": [8, 13], "link": 8, "inform": 8, "who": 8, "have": 8, "alreadi": 8, "recommend": [8, 13], "look": [8, 13], "mai": [8, 13], "match": [8, 13], "term": 8, "interest": 8, "learn": 8, "publish": 8, "advic": 8, "although": 8, "trad": 8, "mode": 8, "idea": 8, "clang": 8, "date": 8, "novemb": 8, "2023": 8, "machin": 8, "supercomput": 8, "tcsd": 8, "flag": 8, "kfast": 8, "openmp": 8, "process": 8, "run": 8, "12": 8, "per": 8, "about": 8, "usag": 8, "observ": 8, "pleas": 8, "chapter": 8, "investig": 8, "bottleneck": 8, "pmu": 8, "event": 8, "how": 8, "well": 9, "gener": 9, "perfectli": 10, "outsid": 10, "sequenti": 10, "ignor": 10, "simultan": [10, 11], "outer": [10, 11, 12], "one": [10, 12], "anoth": 10, "remaind": 10, "p_nq": 10, "gbase": 10, "element": [10, 12], "p_nggeo": 10, "p_np": 10, "r_g00": 10, "ggeo": 10, "p_g00id": 10, "r_g01": 10, "p_g01id": 10, "r_g11": 10, "p_g11id": 10, "r_g12": 10, "p_g12id": 10, "r_g02": 10, "p_g02id": 10, "r_g22": 10, "p_g22id": 10, "qr": 10, "qt": 10, "s_d": 10, "s_q": 10, "s_gqr": 10, "s_gq": 10, "s_gqt": 10, "simd": [10, 11, 12], "lower": [10, 11, 12], "upper": [10, 11, 12], "53": 10, "76": 10, "16": 10, "altern": 10, "solut": 10, "1a": 10, "ani": [11, 12], "between": 11, "becaus": 11, "must": 11, "written": 11, "without": 11, "carri": 11, "possibl": 11, "r12pl": 11, "e12mn": 11, "r12mn": 11, "e12pl": 11, "ich": [11, 12], "icloud": 11, "chmax": [11, 12], "ic": 11, "mstrn_ncloud": 11, "rd_kmax": [11, 12], "t": 11, "cf": 11, "r0": 11, "i_cloud": 11, "0_rp": [11, 12], "i_clearski": 11, "t0": 11, "em": 11, "ep": 11, "kk": 11, "54": [11, 12], "38": 11, "67": 11, "length": 12, "inactiv": 12, "unignor": 12, "indexp": 12, "ga": 12, "igasab": 12, "iga": 12, "iw": 12, "ppm": 12, "dz_std": 12, "a1": 12, "akd": 12, "gasno": 12, "factp": 12, "a2": 12, "a3": 12, "factpt": 12, "factt32": 12, "factt21": 12, "tauga": 12, "51": [12, 13], "35": [12, 13], "activ": 12, "68": 12, "86": 12, "speedup": 13, "04": 13, "02": 13, "19": 13, "78": 13, "79": 13}, "objects": {}, "objtypes": {}, "objnames": {}, "titleterms": {"reduct": [0, 4], "wait": [0, 4], "time": [0, 4], "cach": 0, "access": [0, 3], "specifi": 1, "contigu": [1, 3], "attribut": 1, "arrai": [1, 2], "pointer": 1, "motiv": [1, 2, 3, 5, 6, 10, 11, 12], "appli": [1, 2, 3, 5, 6, 10, 11, 12], "exampl": [1, 2, 3, 5, 6, 10, 11, 12], "real": [1, 2, 3, 5, 6, 10, 11, 12], "case": [1, 2, 3, 5, 6, 10, 11, 12], "refer": [1, 2, 3, 5, 6, 10], "interchang": [2, 11, 12], "dimens": 2, "ao": 2, "layout": 2, "full": 3, "unrol": 3, "innermost": [3, 6, 11, 12], "loop": [3, 5, 6, 10, 11, 12], "non": 3, "data": [3, 11], "calcul": 4, "fission": [5, 10], "larg": 5, "bodi": 5, "stripe": 6, "small": [6, 12], "iter": [6, 12], "count": [6, 12], "tune": 7, "tip": 7, "a64fx": 7, "processor": 7, "introduct": 8, "what": 8, "i": 8, "thi": 8, "document": 8, "structur": 8, "environ": 8, "perform": 8, "measur": 8, "promot": 9, "vector": 9, "imperfectli": 10, "nest": 10, "depend": 11, "summari": 13}, "envversion": {"sphinx.domains.c": 3, "sphinx.domains.changeset": 1, "sphinx.domains.citation": 1, "sphinx.domains.cpp": 9, "sphinx.domains.index": 1, "sphinx.domains.javascript": 3, "sphinx.domains.math": 2, "sphinx.domains.python": 4, "sphinx.domains.rst": 2, "sphinx.domains.std": 2, "sphinx": 60}, "alltitles": {"Reduction of Waiting Time for Cache Access": [[0, "reduction-of-waiting-time-for-cache-access"]], "Specifying CONTIGUOUS Attribute to Array Pointer": [[1, "specifying-contiguous-attribute-to-array-pointer"]], "Motivation": [[1, "motivation"], [2, "motivation"], [3, "motivation"], [5, "motivation"], [6, "motivation"], [10, "motivation"], [11, "motivation"], [12, "motivation"]], "Applied Example": [[1, "applied-example"], [2, "applied-example"], [3, "applied-example"], [5, "applied-example"], [6, "applied-example"], [10, "applied-example"], [11, "applied-example"], [12, "applied-example"]], "Real Cases": [[1, "real-cases"], [2, "real-cases"], [3, "real-cases"], [5, "real-cases"], [6, "real-cases"], [10, "real-cases"], [11, "real-cases"], [12, "real-cases"]], "References": [[1, "references"], [2, "references"], [3, "references"], [5, "references"], [6, "references"], [10, "references"]], "Interchange of Array Dimension for AoS Layout": [[2, "interchange-of-array-dimension-for-aos-layout"]], "Full-Unrolling of Innermost Loop with Non-Contiguous Data Access": [[3, "full-unrolling-of-innermost-loop-with-non-contiguous-data-access"]], "Reduction of Waiting Time for Calculation": [[4, "reduction-of-waiting-time-for-calculation"]], "Fission of Loop with Large Loop Body": [[5, "fission-of-loop-with-large-loop-body"]], "Striping of Innermost Loop with Small Iteration Count": [[6, "striping-of-innermost-loop-with-small-iteration-count"]], "Tuning Tips for A64FX Processors": [[7, "tuning-tips-for-a64fx-processors"]], "Introduction": [[8, "introduction"]], "What is This Document": [[8, "what-is-this-document"]], "Structure of This Document": [[8, "structure-of-this-document"]], "Environment for Performance Measurement": [[8, "environment-for-performance-measurement"]], "Promoting Vectorization": [[9, "promoting-vectorization"]], "Fission of Imperfectly Nested Loops": [[10, "fission-of-imperfectly-nested-loops"]], "Interchange of Innermost Loop with Data Dependency": [[11, "interchange-of-innermost-loop-with-data-dependency"]], "Interchange of Innermost Loop with Small Iteration Count": [[12, "interchange-of-innermost-loop-with-small-iteration-count"]], "Summary": [[13, "summary"]]}, "indexentries": {}})